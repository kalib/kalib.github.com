
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Marcelo Cavalcante Rocha ~</title>
  <meta name="author" content="Marcelo Cavalcante Rocha - Kalib">

  
  <meta name="description" content="Semana passada completei um mês de utilização do Arch Linux, mas como não tive tempo para publicar nada, segue agora um resumo do que tenho obtido &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://kalib.github.io/blog/page/57/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Marcelo Cavalcante Rocha ~" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42903485-1']);
    _gaq.push(['_setDomainName','marcelocavalcante.net']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:kalib.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            Marcelo Cavalcante Rocha ~
        </span>
       
           <span class="blue_dark">
             Hacking the damn life...
           </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Arquivos</a></li>
  <li><a href="/about">Sobre mim</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/07/24/1-mes-de-arch-linux-meu-resultado-obtido/">1 Mês De Arch Linux - Meu Resultado Obtido</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-24T08:01:00-04:00" pubdate data-updated="true">Jul 24<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/07/24/1-mes-de-arch-linux-meu-resultado-obtido/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="left" src="/imgs/arch.png" title="'Arch Linux'" >
Semana passada completei um mês de utilização do Arch Linux, mas como não tive tempo para publicar nada, segue agora um resumo do que tenho obtido com o Arch Linux nesse 1 mês de uso intensivo do mesmo como distribuição oficial.</p>

<p>Performance: No quesito performance o Arch me surpreendou. Ganhou em meus olhos o lugar, com mérito, da distribuição mais rápida que já testei até hoje. Para os que acompanham meus posts, sabem que essa lista não é pequena. O Arch, por vir à luz de forma simples e &ldquo;pelado&rdquo;, bem como nós viemos a Terra, nos proporciona um maior controle do que queremos ter instalado e rodando. E como fazemos isto manualmente, podemos adquirir uma performance maior. O boot do mesmo é também o mais rápido que já tive em minha máquina. A utilização de recursos é muito bem clara quando se deixa um top rodando. Pude ver que o consumo de memória e processador baixaram muito se comparado a outras distribuições que utilizei durante muito tempo.</p>

<p>Pacotes i686: A maioria dos computadores hoje em dia possuem processadores i686, porém nenhuma distribuição até hoje possuia versões para i686. No máximo possuiam uma versão de sua iso de instalação para i686, mas os pacotes continuavam sendo para i386, desperdiçando o potencial de seu hardware. No Arch Linux, por padrão todos os pacotes já são feitos para arquiteturas i686, possuindo também a versão x64 para aqueles que possuem este tipo de processador. ;]</p>

<p>Gerenciamento de pacotes: Este também foi um pequeno choque no começo para mim. Depois de testar várias distros me apeguei bastante ao Debian e ao Kubuntu pelo fato de eles trazerem consigo a maravilhosa ferramenta Aptitude. Não tiro aqui os méritos da mesma. Ela me manteve entre as espirais Debian por cerca de 2 anos. ;] Utilizar algo diferente, depois de tanto tempo foi mesmo um choque, mas a verdade é que logo na primeira semana o pacman, gerenciador de pacotes do Arch Linux, roubou em meu coração o lugar no qual se encontrava o Aptitude. Ainda gosto do aptitude, e continuo optando por ele como segunda escolha, mas devo ser justo em meus comentários. Acreditem, se depois de 2 anos como um fanático pelo aptitude, e meus posts anteriores não me deixam mentir, eu passei agora a adotar uma nova ferramenta, o pacman, é porque alguma coisa realmente me convenceu de que valeria a pena. Além de muito estável, a forma como o pacman funciona é simples e eficaz. Trazendo respostas rápidas à simples comandos com poucos parâmetros, posso resolver tudo o que preciso relacionado a meus pacotes sem a preocupação de tratar dependências ou quebrar pacotes, já que além de instalar as dependências juntamente com um pacote, ele também as removerá desde que as mesmas estejam orfãns, ou não necessárias para outros pacotes.</p>

<p>Pacotes Atualizados: Uma das coisas que mais me surpreendeu no Arch, é a velocidade com que as coisas acontecem. Desde que adotei o Arch como minha distribuição, adotei a prática de fazer um upgrade completo em meu sistema diariamente através do pacman. Fico muito contente em ver que diariamente, uso os pacotes em suas versões mais recentes. Dois que me chamaram a atenção foram por exemplo o amsn e firefox, já que são de uso diário. Bastou sair publicado no site oficial do amsn uma nova versão com correções de bugs, e no upgrade do dia seguinte, lá estava ele nos meus repositórios e logo em seguida rodando em minha máquina. O mesmo com o Firefox, após o nascimento do tão esperado Firefox 3.0, surgiram também descobertas sobre vulnerabilidades do mesmo. Assim que foi lançada a versão 3.0.1 do mesmo, no meu upgrade do dia seguinte, lá estava em minha máquina a raposa de fogo em sua versão 3.0.1 funcionando perfeitamente. O mesmo acontece com os outros vários pacotes que utilizo.</p>

<p>AUR: Como se já não bastasse o magnífico pacman pra gerenciar meus pacotes, também contamos com o <a href="http://aur.archlinux.org/">AUR</a>, onde podemos achar aquele pacote em específico que por alguma razão ainda não se encontra nos repositórios oficiais. A organização do AUR é excelente onde podemos criar pacotes e submetê-los para que depois de uma votação adequada, possam finalmente assumir postos mais reconhecidos, até quem sabe um dia entrar para os repositórios. A quantidade de pacotes disponíveis no AUR é surpreendente, o que apenas demonstra a força da comunidade atuante no Arch.</p>

<p>Rolling Release: Eis um outro fator primordial no Arch Linux. É uma distribuição Rolling Release. O que isso significa? Você não tem que se dar ao trabalho de baixar uma iso e reinstalar cada vez que surge uma versão nova do Arch Linux. O próprio pacman se responsabiliza de fazer este upgrade sem quebrar seu sistema. Você não precisa mais se manter com versões antigas de sua distribuição por não querer perder tanto tempo fazendo seus backups ou reinstalando tudo do zero. Tive a sorte de poder testar este recurso durante este 1 mês de testes com o Arch, já que no mês de Junho tivemos o lançamento da nova versão do Arch Linux, 2008.6 Overlord, e pude pessoalmente atestar a validade desta qualidade do Arch. Resultado? A minha distro foi totalmente atualizada para a nova versão do Arch, sem nenhum trauma. Tudo funcinou perfeitamente. Mais um ponto pro Arch em meu coração.</p>

<p><img class="center" src="/imgs/archoharch.png" title="'Arch Oh Arch'" ></p>

<p>Segurança: O Linux trás uma característica em comum, independente de distribuição, que é a segurança. Porém quanto menos serviços desnecessários rodando, menores serão as brechas e vulnerabilidades, portanto o Arch tem vantagem nisso. E por trazer algumas características do BSD, procura também uma estabilidade neste sentido. O próprio ports do BSD é utilizado no Arch Linux. ;]</p>

<p>Comunidade: A comunidade do Arch Linux, em especial a comunidade <a href="http://archlinux-br.org/">archlinux-br</a>, tem me recebido de braços abertos desde que passei a frequentar e tentar ajudar a mesma, seja na divulgação, resposta de dúvidas ou mesmo na tradução de documentações do Arch. Essa oportunidade de ajudar e ser bem recebido ajudou muito em minha decisão por adotar esta distribuição. Outro ponto a favor, é o fato de termos dois brasileiros atualmente engajados no time de desenvolvedores do Arch Linux, o que significa que nossa voz é mais facilmente ouvida. Deixo aqui os parabéns a ambos que tem feito um ótimo trabalho: <a href="http://hdoria.archlinux-br.org/blog">Hugo Doria</a> e Douglas Soares. (Perdão, não achei o link para o mesmo)</p>

<p>É isso pessoal, espero que assim como eu, possam experimentar e conhecer esta magnífica distribuição.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/07/14/parte-ii-limpando-memoria-cache-de-forma-automatizada/">Parte II - Limpando Memória Cache De Forma Automatizada</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-14T14:09:00-04:00" pubdate data-updated="true">Jul 14<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/07/14/parte-ii-limpando-memoria-cache-de-forma-automatizada/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Muitos me pediram por aqui ou mesmo por email para explicar como seria a implementação desta técnica de forma automatizada.</p>

<p>Bom, utilizo isto para o servidor que citei no artigo anterior, utilizado pelos nossos amigos desenvolvedores Java. ;] Nada pessoal eim?!</p>

<p>Aqui precisaremos apenas de um mínimo de intimidade com shell script e um pouco de conhecimento sobre o agendamento de tarefas no linux através do cron.</p>

<p>Mãos a obra&hellip;</p>

<p>A missão: Uma vez que nossos amigos não conseguem trabalhar de forma harmônica com a alocação e desalocação de memória em nossos servidores, iremos agendar a limpeza de cache para todos os dias no começo do expediente (8:00) e após o almoço. Lembrando que este é apenas um exemplo, mas você pode adaptar os horários de acordo com sua real necessidade.</p>

<p>Soldados Disponíveis: Shell Script e Cron</p>

<p>Plano: Um pequeno e simples script em shell será executado nos dias e horários informados anteriormente de forma a fazer uma limpeza no cache.</p>

<p>Execução:</p>

<p>Primeiro criaremos o script que fará a ação de limpeza do cache. Para isso abra o editor de textos de sua preferência. Particularmente prefiro o vim, mas este pode ser substituido por qualquer outro.</p>

<p>No seu corpo insira o seguinte conteúdo:</p>

<blockquote><h1>!/bin/bash</h1></blockquote>

<h1>limpando cache</h1>

<blockquote><h1>o seguinte comando é o responsável pela limpeza</h1></blockquote>

<p>echo 3 > /proc/sys/vm/drop_caches</p>

<blockquote></blockquote>

<p>Feito isto, salve o arquivo com o nome de limpacache.sh</p>

<p>Sim, isto é tudo o que o seu script precisa. Com o script criado, você deverá agora lhe dar condições de execução. Utilize o seguinte comando:</p>

<blockquote><h1>chmod a+x limpacache.sh</h1></blockquote>

<p>Agora que ele está pronto e com permissão de execução, iremos agendar a execução do mesmo. No terminal digite:</p>

<blockquote><h1>crontab -e</h1></blockquote>

<p>Isto irá abrir um arquivo no qual você deverá fazer o agendamento de sua tarefa. No mesmo insira o seguinte conteúdo:</p>

<blockquote><h1>mm HH DD MM DS tarefa</h1></blockquote>

<p>00 08 * * * /usr/bin/scripts/limpacache.sh</p>

<p>00 14 * * * /usr/bin/scripts/limpacache.sh</p>

<blockquote></blockquote>

<p>Ps: O caminho /etc/scripts/ precisa ser configurado de acordo com o caminho utilizado por você. ;]</p>

<p>Pronto. Pode salvar e encerrar este aquivo.</p>

<p>Traduzindo o comando as linhas do cron que utilizamos:</p>

<p>mm: minutos</p>

<p>HH: horas</p>

<p>DD: dia</p>

<p>MM: mês</p>

<p>DS: dia da semana</p>

<p>/usr/bin/scripts/limpacache.sh: tarefa a ser realizada</p>

<p>Feito isto, o plano está concretizado. Seu script será executado todos os dias nestes dois horários.</p>

<p>Sinta-se livre agora para customizar os dias e horários da maneira que for mais conveniente para você.</p>

<p>Abraços</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/07/09/limpando-o-cache-de-forma-rapida/">Limpando O Cache De Forma Rápida</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-09T10:14:00-04:00" pubdate data-updated="true">Jul 9<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/07/09/limpando-o-cache-de-forma-rapida/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Aqueles que são administradores de redes e servidores já devem ter passado por problemas parecidos com este.</p>

<p>Nesta dica irei apresentar um comando simples para limpar sua memória em cache.</p>

<p>Resolvi escrever sobre isto por ter visto duas vezes na mesma semana problemas relacionados a isso. Um foi aqui mesmo onde trabalho, onde estávamos percebendo que o consumo de memória em um dos servidores estava muito alto, porém com pouca atividade no mesmo, no qual percebi que nada mais era do que muita memória alocada em cache sem necessidade no momento. Desenvolvedores java&hellip;vai entender.. hauhauha (brincadeira.. :p).</p>

<p>Outro caso foi uma dúvida que surgiu, bem parecida, em um fórum do qual faço parte, onde um rapaz estava passando pelo mesmo problema no servidor dele&hellip; Com consumo exagerado de memória. Ele até colou o resultado do top no qual podíamos ver claramente que não haviam processos consumindo tudo aquilo de memória, e mais uma vez pudemos ver que o grande vilão era o cache, o que lhe passava essa impressão de memória totalmente consumida.</p>

<p>O comando para se limpar este chache é o seguinte:</p>

<blockquote><h1>echo 3 > /proc/sys/vm/drop_caches</h1></blockquote>

<p>Exemplo:</p>

<p>Aqui vai uma saída do meu top antes de rodar o comando. ( Reparem no consumo de memória armazenada em Cache na última linha!)</p>

<blockquote><p>top &ndash; 09:40:03 up 1:42, 1 user, load average: 0.06, 0.20, 0.20</p></blockquote>

<p>Tasks: 83 total, 2 running, 80 sleeping, 0 stopped, 1 zombie</p>

<p>Cpu(s): 4.3%us, 0.5%sy, 0.2%ni, 95.0%id, 0.0%wa, 0.0%hi, 0.0%si, 0.0%st</p>

<p>Mem: 1944240k total, 898916k used, 245324k free, 51176k buffers</p>

<p>Swap: 996020k total, 0k used, 996020k free, 969000k cached</p>

<blockquote></blockquote>

<p>Repare agora o resultado obtido pelo top depois de executar o comando para limpar o cache:</p>

<blockquote><p>top &ndash; 09:45:03 up 1:47, 1 user, load average: 0.32, 0.16, 0.17</p></blockquote>

<p>Tasks: 85 total, 3 running, 81 sleeping, 0 stopped, 1 zombie</p>

<p>Cpu(s): 11.2%us, 1.5%sy, 0.0%ni, 63.4%id, 23.9%wa, 0.0%hi, 0.0%si, 0.0%st</p>

<p>Mem: 1944240k total, 329412k used, 1614828k free, 768k buffers</p>

<p>Swap: 996020k total, 0k used, 996020k free, 69088k cached</p>

<blockquote></blockquote>

<p>A memória armazenada em cache caiu de ~969mb para ~69mb. ;]</p>

<p>Bingo!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/58/">&larr; Anteriores</a>
    
    <a href="/blog/archives">Arquivos do Blog</a>
    
    <a class="next" href="/blog/page/56/">Novas &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1 align="left">Marcelo Cavalcante</h1>
  <p><img class="right" src="http://www.marcelocavalcante.net/imgs/kalib_picture_pq_circle_pq.png" title="'kalib'" ><p align=rght>Sysadmin dinâmico, escrupulosamente curioso, reservadamente convencional, multitarefa, command line heavy-user, estudante e pesquisador, surfista por prazer, leitor inquieto e apaixonado por vinhos.<br>Me conheça melhor <a href="http://blog.marcelocavalcante.net/about">clicando aqui</a>.</p></p>
</section><section>
  <h1>Posts Recentes</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/04/14/chef-uso-de-condicionais-not-if-e-only-if/">Chef: Uso de Condicionais not_if e only_if</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/04/01/chef-aautomacao-e-gerenciamento-de-configuracao/">Chef: Automação e Gerenciamento de Configuração</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/06/24/conhecendo-o-kubernetes-clusters-de-containers/">Conhecendo o Kubernetes - Clusters de Containers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/03/11/recebendo-alarmes-do-aws-diretamente-no-slack/">Recebendo Alarmes do AWS Diretamente no Slack</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/20/docker-uma-alternativa-elegante-para-containers-no-linux/">Docker - Uma alternativa elegante para containers no Linux</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Estou lendo</h1>
  <img align="center" src="/imgs/livros/spiritprophecy.jpg">
</section>
<section>
  <h1> Eu apoio
</h1>
  <span>
    <a href='http://ansible.com'><img style='padding: .5em; margin: .5em;' src='/images/stickers/ansible.com.png'></a><a href='http://archlinux.org'><img style='padding: .5em; margin: .5em;' src='/images/stickers/archlinux.org.png'></a><a href='http://asterisk.org'><img style='padding: .5em; margin: .5em;' src='/images/stickers/asterisk.org.png'></a><a href='http://atom.io'><img style='padding: .5em; margin: .5em;' src='/images/stickers/atom.io.png'></a><a href='http://chef.io'><img style='padding: .5em; margin: .5em;' src='/images/stickers/chef.io.png'></a><a href='http://djangoproject.com'><img style='padding: .5em; margin: .5em;' src='/images/stickers/djangoproject.com.png'></a><a href='http://docker.com'><img style='padding: .5em; margin: .5em;' src='/images/stickers/docker.com.png'></a><a href='http://github.com'><img style='padding: .5em; margin: .5em;' src='/images/stickers/github.com.png'></a><img style='padding: .5em; margin: .5em;' src='/images/stickers/glider.png' ><a href='http://jenkins.io'><img style='padding: .5em; margin: .5em;' src='/images/stickers/jenkins.io.png'></a><a href='http://kde.org'><img style='padding: .5em; margin: .5em;' src='/images/stickers/kde.org.png'></a><a href='http://kubernetes.io'><img style='padding: .5em; margin: .5em;' src='/images/stickers/kubernetes.io.png'></a><a href='http://linux.org'><img style='padding: .5em; margin: .5em;' src='/images/stickers/linux.org.png'></a><a href='http://octopress.org'><img style='padding: .5em; margin: .5em;' src='/images/stickers/octopress.org.png'></a><a href='http://opensource.org'><img style='padding: .5em; margin: .5em;' src='/images/stickers/opensource.org.png'></a><a href='http://puppet.com'><img style='padding: .5em; margin: .5em;' src='/images/stickers/puppet.com.png'></a><a href='http://python.org'><img style='padding: .5em; margin: .5em;' src='/images/stickers/python.org.png'></a><a href='http://raspberrypi.org'><img style='padding: .5em; margin: .5em;' src='/images/stickers/raspberrypi.org.png'></a><a href='http://ruby-lang.org'><img style='padding: .5em; margin: .5em;' src='/images/stickers/ruby-lang.org.png'></a><a href='http://vagrantup.com'><img style='padding: .5em; margin: .5em;' src='/images/stickers/vagrantup.com.png'></a>
  </span>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Marcelo Cavalcante Rocha - Kalib -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'marcelocavalcante';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
